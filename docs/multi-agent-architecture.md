# ë©€í‹° ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜ ê°€ì´ë“œ

## ê°œìš”

Writer-Editor ì‹œìŠ¤í…œì˜ ë©€í‹° ì—ì´ì „íŠ¸ í™•ì¥ì€ 6ê°œì˜ ì „ë¬¸í™”ëœ ì—ì´ì „íŠ¸ê°€ í˜‘ì—…í•˜ì—¬ ê³ í’ˆì§ˆ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ ì›Œí¬í”Œë¡œìš°

```
ì‚¬ìš©ì ì…ë ¥ (í† í”½)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 1: ì˜ë„ ë¶„ì„                                           â”‚
â”‚ Business Analyst â†’ ì‚¬ìš©ì ì˜ë„ íŒŒì•… (ë¬¸ì„œ ìœ í˜•, ëŒ€ìƒ, í†¤)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 2: ëª©ì°¨ ì‘ì„± ë° ê²€í†                                     â”‚
â”‚ Content Strategist â†’ í…œí”Œë¦¿ ê¸°ë°˜ ëª©ì°¨ ìƒì„±                    â”‚
â”‚         â†“                                                    â”‚
â”‚ Outline Reviewer â†’ ëª©ì°¨ í’ˆì§ˆ ê²€í†                             â”‚
â”‚         â†“                                                    â”‚
â”‚    [ê²€í†  ë£¨í”„: ìµœëŒ€ 3íšŒ ë°˜ë³µ]                                 â”‚
â”‚         â†“                                                    â”‚
â”‚ ğŸ‘¤ User Intervention â†’ ëª©ì°¨ ìŠ¹ì¸/ìˆ˜ì • ìš”ì²­                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 3: ì›¹ ë¦¬ì„œì¹˜                                           â”‚
â”‚ Web Search Agent â†’ ì„¹ì…˜ë³„ ì •ë³´ ìˆ˜ì§‘ ë° ìš”ì•½                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 4: ì´ˆì•ˆ ì‘ì„± ë° í¸ì§‘                                    â”‚
â”‚ Writer â†’ ëª©ì°¨ + ë¦¬ì„œì¹˜ ê¸°ë°˜ ì´ˆì•ˆ ì‘ì„±                         â”‚
â”‚         â†“                                                    â”‚
â”‚ Editor â†’ í”¼ë“œë°± ì œê³µ                                          â”‚
â”‚         â†“                                                    â”‚
â”‚ ğŸ‘¤ User Intervention â†’ ê³„ì†/ì¤‘ë‹¨ ê²°ì •                        â”‚
â”‚         â†“                                                    â”‚
â”‚    [ê²€í†  ë£¨í”„: ìµœëŒ€ 10íšŒ ë°˜ë³µ]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ìµœì¢… ë¬¸ì„œ ì™„ì„±
```

## ì—ì´ì „íŠ¸ ìƒì„¸ ì„¤ëª…

### 1. Business Analyst Agent

**íŒŒì¼**: `src/agents/business_analyst.py`

**ì—­í• **: ì‚¬ìš©ì ìš”ì²­ ë¶„ì„ ë° ì˜ë„ íŒŒì•…

**Temperature**: 0.2 (ë¶„ì„ì )

**ì…ë ¥**:
- ì‚¬ìš©ìê°€ ì œê³µí•œ í† í”½

**ì¶œë ¥** (JSON í˜•ì‹):
```python
UserIntentAnalysis = {
    "document_type": str,        # blog_post, technical_article, marketing_copy
    "target_audience": str,      # ëŒ€ìƒ ë…ì
    "tone": str,                 # professional, casual, technical, friendly
    "key_messages": List[str],   # ì „ë‹¬í•  í•µì‹¬ ë©”ì‹œì§€
    "constraints": List[str],    # ì œì•½ì‚¬í•­ (ê¸¸ì´, í˜•ì‹ ë“±)
    "objectives": List[str]      # ì½˜í…ì¸  ëª©í‘œ
}
```

**ì˜ˆì‹œ**:
```json
{
  "document_type": "blog_post",
  "target_audience": "ì¼ë°˜ ë…ì ë° AI ì´ˆë³´ì",
  "tone": "professional",
  "key_messages": [
    "AIê°€ í—¬ìŠ¤ì¼€ì–´ë¥¼ í˜ì‹ í•˜ê³  ìˆìŒ",
    "ì§„ë‹¨ ì •í™•ë„ í–¥ìƒ",
    "ê°œì¸í™”ëœ ì¹˜ë£Œ ê°€ëŠ¥"
  ],
  "constraints": ["1500-2500ë‹¨ì–´", "ë¹„ì „ë¬¸ê°€ë„ ì´í•´ ê°€ëŠ¥"],
  "objectives": ["AI í—¬ìŠ¤ì¼€ì–´ í™œìš© ì‚¬ë¡€ ì†Œê°œ", "ë…ì ê´€ì‹¬ ìœ ë„"]
}
```

**êµ¬í˜„ í¬ì¸íŠ¸**:
- JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ í´ë°± ë©”ì»¤ë‹ˆì¦˜
- êµ¬ì¡°í™”ëœ ì¶œë ¥ìœ¼ë¡œ í›„ì† ì—ì´ì „íŠ¸ ê°€ì´ë“œ

---

### 2. Content Strategist Agent

**íŒŒì¼**: `src/agents/content_strategist.py`

**ì—­í• **: êµ¬ì¡°í™”ëœ ëª©ì°¨ ì‘ì„±

**Temperature**: 0.5 (ê· í˜•ì¡íŒ ì°½ì˜ì„±)

**ì…ë ¥**:
- í† í”½
- UserIntentAnalysis
- ì´ì „ ëª©ì°¨ (ìˆ˜ì • ì‹œ)
- í”¼ë“œë°± (ìˆ˜ì • ì‹œ)

**ì¶œë ¥**:
```python
ContentOutline = {
    "version": int,
    "sections": List[OutlineSection],
    "overall_structure": str,
    "estimated_total_length": str,
    "template_used": str,
    "timestamp": str
}

OutlineSection = {
    "section_id": str,
    "title": str,
    "purpose": str,
    "key_points": List[str],
    "estimated_length": str,
    "research_needed": bool,
    "search_queries": List[str]
}
```

**í…œí”Œë¦¿ ì‚¬ìš©**:
- Blog Post Template: hook, context, main_content, practical, conclusion
- Technical Article: abstract, introduction, technical_details, results, conclusion
- Marketing Copy: headline, problem, solution, benefits, social_proof, cta

**ì˜ˆì‹œ**:
```python
{
  "version": 1,
  "sections": [
    {
      "section_id": "hook",
      "title": "AIê°€ ë°”ê¾¸ëŠ” ì˜ë£Œì˜ ë¯¸ë˜",
      "purpose": "ë…ìì˜ ê´€ì‹¬ì„ ëŒê³  ì£¼ì œ ì†Œê°œ",
      "key_points": [
        "AI í—¬ìŠ¤ì¼€ì–´ ì‹œì¥ ê¸‰ì„±ì¥",
        "ì™œ ì§€ê¸ˆ ì¤‘ìš”í•œê°€",
        "ì´ ê¸€ì—ì„œ ë‹¤ë£° ë‚´ìš©"
      ],
      "estimated_length": "200-250 words",
      "research_needed": True,
      "search_queries": [
        "AI healthcare market size 2024",
        "AI healthcare trends"
      ]
    },
    // ... ì¶”ê°€ ì„¹ì…˜
  ],
  "overall_structure": "5-section structure: Introduction â†’ Background â†’ Main Content â†’ Examples â†’ Conclusion",
  "estimated_total_length": "1500-2500 words"
}
```

---

### 3. Outline Reviewer Agent

**íŒŒì¼**: `src/agents/outline_reviewer.py`

**ì—­í• **: ëª©ì°¨ í’ˆì§ˆ ê²€í†  (Self-Review íŒ¨í„´)

**Temperature**: 0.2 (ë¶„ì„ì )

**ì…ë ¥**:
- ContentOutline
- UserIntentAnalysis
- í† í”½

**ì¶œë ¥**:
```python
OutlineReview = {
    "version_reviewed": int,
    "approved": bool,
    "strengths": List[str],
    "weaknesses": List[str],
    "specific_feedback": Dict[str, str],  # section_id -> í”¼ë“œë°±
    "recommendations": List[str],
    "overall_assessment": str,
    "timestamp": str
}
```

**ê²€í†  ê¸°ì¤€**:
1. ë…¼ë¦¬ì  íë¦„
2. ì™„ì „ì„±
3. ëŒ€ìƒ ë…ì ì í•©ì„±
4. ëª…í™•ì„±
5. ì¼ê´€ì„±
6. ì‹¤í–‰ ê°€ëŠ¥ì„±

**ì˜ˆì‹œ**:
```python
{
  "version_reviewed": 1,
  "approved": True,
  "strengths": [
    "ëª…í™•í•œ 5ë‹¨ê³„ êµ¬ì¡°",
    "ê° ì„¹ì…˜ì˜ ëª©ì ì´ ë¶„ëª…í•¨",
    "ë¦¬ì„œì¹˜ ì¿¼ë¦¬ê°€ êµ¬ì²´ì "
  ],
  "weaknesses": [
    "ì‹¤ìš©ì  ì˜ˆì‹œ ì„¹ì…˜ì˜ key_pointsê°€ ë‹¤ì†Œ ì¶”ìƒì "
  ],
  "specific_feedback": {
    "practical": "ì‚¬ë¡€ ì—°êµ¬ë‚˜ êµ¬ì²´ì  ìˆ˜ì¹˜ ì¶”ê°€ ê¶Œì¥"
  },
  "recommendations": [
    "practical ì„¹ì…˜ì— ì‹¤ì œ ë³‘ì›/ê¸°ì—… ì‚¬ë¡€ ì¶”ê°€"
  ],
  "overall_assessment": "ì „ë°˜ì ìœ¼ë¡œ ìš°ìˆ˜í•œ êµ¬ì¡°. ì‘ì€ ê°œì„ ì‚¬í•­ë§Œ ìˆìœ¼ë©´ ì§„í–‰ ê°€ëŠ¥."
}
```

**Self-Review ë£¨í”„**:
- ìŠ¹ì¸ë˜ì§€ ì•Šìœ¼ë©´ ìë™ìœ¼ë¡œ Content Strategistì—ê²Œ í”¼ë“œë°± ì „ë‹¬
- ìµœëŒ€ 3íšŒ ë°˜ë³µ
- 3íšŒ ë„ë‹¬ ì‹œ ì‚¬ìš©ìì—ê²Œ ê°•ì œ ê°œì…

---

### 4. Web Search Agent

**íŒŒì¼**: `src/agents/web_search_agent.py`

**ì—­í• **: ì›¹ ê²€ìƒ‰ ë° ì •ë³´ ìˆ˜ì§‘

**Temperature**: 0.3 (ì‚¬ì‹¤ ì •í™•ì„±)

**ì…ë ¥**:
- ContentOutline (research_needed=Trueì¸ ì„¹ì…˜ë“¤)
- í† í”½

**ì¶œë ¥**:
```python
SectionResearch = {
    "section_id": str,
    "search_queries": List[str],
    "results": List[SearchResult],
    "summary": str,           # LLMì´ ìƒì„±í•œ ìš”ì•½
    "key_facts": List[str],   # ì¶”ì¶œëœ í•µì‹¬ ì‚¬ì‹¤
    "sources": List[str],     # URL ëª©ë¡
    "timestamp": str
}
```

**ê²€ìƒ‰ ì œê³µì**:
1. **DuckDuckGo** (ê¸°ë³¸, ë¬´ë£Œ)
   - API í‚¤ ë¶ˆí•„ìš”
   - `duckduckgo-search` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©

2. **Tavily** (ì„ íƒ, AI ìµœì í™”)
   - API í‚¤ í•„ìš”
   - LLM ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìµœì í™”ëœ ê²°ê³¼

3. **Serper** (ì„ íƒ, Google ê²°ê³¼)
   - API í‚¤ í•„ìš”
   - Google ê²€ìƒ‰ ê²°ê³¼ ì œê³µ

**í”„ë¡œì„¸ìŠ¤**:
1. ê° ì„¹ì…˜ì˜ search_queries ì‹¤í–‰
2. ê²°ê³¼ ìˆ˜ì§‘ ë° ì¤‘ë³µ ì œê±°
3. LLMìœ¼ë¡œ ìš”ì•½ ìƒì„±
4. í•µì‹¬ ì‚¬ì‹¤ ì¶”ì¶œ
5. ì¶œì²˜ URL ì €ì¥

**ì˜ˆì‹œ**:
```python
{
  "section_id": "context",
  "search_queries": [
    "AI healthcare market size 2024",
    "AI healthcare statistics"
  ],
  "results": [
    {
      "title": "Global AI in Healthcare Market Size Report 2024",
      "url": "https://example.com/report",
      "snippet": "Market expected to reach $188B by 2030...",
      "relevance_score": 0.95,
      "source": "duckduckgo"
    },
    // ... ë” ë§ì€ ê²°ê³¼
  ],
  "summary": "AI í—¬ìŠ¤ì¼€ì–´ ì‹œì¥ì€ 2024ë…„ ì•½ 200ì–µ ë‹¬ëŸ¬ì—ì„œ 2030ë…„ 1,880ì–µ ë‹¬ëŸ¬ë¡œ ê¸‰ì„±ì¥í•  ì „ë§ì…ë‹ˆë‹¤. ì£¼ìš” ë™ì¸ì€ ì§„ë‹¨ ì •í™•ë„ í–¥ìƒ(92%+), ë¹„ìš© ì ˆê°(30-40%), ê°œì¸í™”ëœ ì¹˜ë£Œì…ë‹ˆë‹¤.",
  "key_facts": [
    "AI ì§„ë‹¨ ì •í™•ë„ 92% ì´ìƒ",
    "2030ë…„ê¹Œì§€ ì—°í‰ê·  37.5% ì„±ì¥ ì˜ˆìƒ",
    "ë°©ì‚¬ì„  ì˜ìƒ ë¶„ì„ì—ì„œ ê°€ì¥ í° í™œìš©"
  ],
  "sources": [
    "https://example.com/report",
    "https://medical-ai.org/stats"
  ]
}
```

---

### 5. Writer Agent (Enhanced)

**íŒŒì¼**: `src/agents/writer.py`

**ì—­í• **: ì´ˆì•ˆ ì‘ì„±

**Temperature**: 0.8 (ì°½ì˜ì )

**3ê°€ì§€ ì‘ì„± ëª¨ë“œ**:

#### Mode 1: ëª©ì°¨ ê¸°ë°˜ ì‘ì„± (Multi-Agent)
```python
create_draft_from_outline(
    topic: str,
    outline: ContentOutline,
    user_intent: UserIntentAnalysis,
    research_by_section: Dict[str, SectionResearch]
)
```

**í”„ë¡œì„¸ìŠ¤**:
1. ëª©ì°¨ì˜ ê° ì„¹ì…˜ êµ¬ì¡° íŒŒì•…
2. í•´ë‹¹ ì„¹ì…˜ì˜ ë¦¬ì„œì¹˜ ë°ì´í„° í™œìš©
3. UserIntentAnalysisì˜ í†¤/ëŒ€ìƒì— ë§ì¶° ì‘ì„±
4. ìì—°ìŠ¤ëŸ¬ìš´ íë¦„ìœ¼ë¡œ ì—°ê²°

#### Mode 2: ë‹¨ìˆœ ì´ˆì•ˆ (Simple)
```python
create_initial_draft(topic: str)
```

#### Mode 3: ìˆ˜ì • (Both)
```python
revise_draft(current_draft: str, feedback: str)
```

**ì…ë ¥ êµ¬ì¡° (Mode 1)**:
```
Write a complete draft about: [í† í”½]

USER INTENT:
Target Audience: [ëŒ€ìƒ]
Tone: [í†¤]
Key Messages: [ë©”ì‹œì§€1, ë©”ì‹œì§€2, ...]
Objectives: [ëª©í‘œ1, ëª©í‘œ2, ...]

OUTLINE TO FOLLOW:
1. [ì„¹ì…˜1 ì œëª©]
   Purpose: [ëª©ì ]
   Key points: [í¬ì¸íŠ¸ë“¤]

2. [ì„¹ì…˜2 ì œëª©]
   ...

RESEARCH FINDINGS:
For section "[ì„¹ì…˜1 ì œëª©]":
Summary: [ìš”ì•½]
Key Facts:
  - [ì‚¬ì‹¤1]
  - [ì‚¬ì‹¤2]
Sources: [ê°œìˆ˜] sources available
```

---

### 6. Editor Agent

**íŒŒì¼**: `src/agents/editor.py`

**ì—­í• **: í¸ì§‘ ë° í”¼ë“œë°±

**Temperature**: 0.3 (ë¶„ì„ì )

**ì…ë ¥**:
- ì´ˆì•ˆ
- ContentOutline (ìˆëŠ” ê²½ìš°)
- UserIntentAnalysis (ìˆëŠ” ê²½ìš°)
- í† í”½
- ë°˜ë³µ íšŸìˆ˜

**ì¶œë ¥** (êµ¬ì¡°í™”ëœ í”¼ë“œë°±):
```
**ê°•ì :**
- [ì˜ëœ ë¶€ë¶„ë“¤]

**ê°œì„  ì˜ì—­:**
- [êµ¬ì²´ì  ì œì•ˆë“¤]

**ëª©ì°¨ ì¤€ìˆ˜:**
- [ëª©ì°¨ ëŒ€ë¹„ í‰ê°€]

**ê¶Œì¥ì‚¬í•­:**
- [ìš°ì„ ìˆœìœ„ë³„ ì œì•ˆ]

**ì „ì²´ í‰ê°€:**
[1-2ë¬¸ì¥ ìš”ì•½]
```

**ê²€í†  í•­ëª©**:
1. êµ¬ì¡° ë° ì¡°ì§
2. ëª…í™•ì„±
3. ì™„ì „ì„±
4. í’ˆì§ˆ
5. ëŒ€ìƒ ë…ì ì í•©ì„±
6. ì˜ë„ ë¶€í•©ì„±

---

## ìƒíƒœ ê´€ë¦¬

### WorkflowState í™•ì¥

```python
class WorkflowState(TypedDict):
    # ê¸°ì¡´ Writer-Editor í•„ë“œ
    topic: str
    current_draft: str
    current_feedback: str
    iterations: Annotated[List[ReviewIteration], add]
    iteration_count: int
    user_decision: str
    max_iterations: int
    conversation_history: Annotated[List[dict], add]

    # ë©€í‹° ì—ì´ì „íŠ¸ í™•ì¥ í•„ë“œ
    user_intent: Optional[UserIntentAnalysis]
    outlines: Annotated[List[ContentOutline], add]
    current_outline: Optional[ContentOutline]
    outline_version: int
    outline_reviews: Annotated[List[OutlineReview], add]
    current_outline_review: Optional[OutlineReview]
    outline_revision_count: int
    max_outline_revisions: int
    research_data: Annotated[List[SectionResearch], add]
    research_by_section: Dict[str, SectionResearch]
    current_stage: str
```

### Reducer íŒ¨í„´

`Annotated[List[T], add]` ì‚¬ìš©:
```python
from operator import add
from typing import Annotated

iterations: Annotated[List[ReviewIteration], add]
```

- ê° ë…¸ë“œê°€ ë¦¬ìŠ¤íŠ¸ì— í•­ëª© ì¶”ê°€ ì‹œ ìë™ ë³‘í•©
- ì „ì²´ ì´ë ¥ ëˆ„ì 
- ìƒíƒœ ì¼ê´€ì„± ë³´ì¥

---

## ì›Œí¬í”Œë¡œìš° ë¼ìš°íŒ…

### 1. ëª©ì°¨ ê²€í†  ë¼ìš°íŒ…

```python
def should_approve_outline(state: WorkflowState) -> Literal["approved", "revise", "max_revisions"]:
    review = state["current_outline_review"]

    # ìµœëŒ€ ë°˜ë³µ ë„ë‹¬
    if state["outline_revision_count"] >= state["max_outline_revisions"]:
        return "max_revisions"

    # ìŠ¹ì¸ë¨
    if review["approved"]:
        return "approved"

    # ìˆ˜ì • í•„ìš”
    return "revise"
```

### 2. ì‚¬ìš©ì ëª©ì°¨ ê²°ì •

```python
def route_outline_decision(state: WorkflowState) -> Literal["proceed", "revise"]:
    decision = state.get("user_decision", "proceed")

    if decision == "revise":
        return "revise"  # Content Strategistë¡œ ëŒì•„ê°
    else:
        return "proceed"  # Web Searchë¡œ ì§„í–‰
```

### 3. ì´ˆì•ˆ ê²€í†  ë¼ìš°íŒ…

```python
def should_continue_draft(state: WorkflowState) -> Literal["writer", "end"]:
    # ìµœëŒ€ ë°˜ë³µ ë„ë‹¬
    if state["iteration_count"] >= state["max_iterations"]:
        return "end"

    # ì‚¬ìš©ì ê²°ì •
    decision = state.get("user_decision", "stop")
    if decision == "continue":
        return "writer"  # ìˆ˜ì • ë£¨í”„
    else:
        return "end"  # ì¢…ë£Œ
```

---

## Human-in-the-Loop êµ¬í˜„

### Interrupt ë©”ì»¤ë‹ˆì¦˜

```python
from langgraph.types import interrupt, Command

# ë…¸ë“œì—ì„œ ì‹¤í–‰ ì¤‘ë‹¨
def outline_intervention_node(state: WorkflowState) -> Dict[str, Any]:
    # ì‚¬ìš©ìì—ê²Œ ì •ë³´ í‘œì‹œ
    prompt = "ëª©ì°¨ë¥¼ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (proceed/revise)"

    # ì¤‘ë‹¨ ë° ëŒ€ê¸°
    user_decision = interrupt(prompt)

    return {"user_decision": user_decision}

# ì¬ê°œ
app.stream(Command(resume=user_input), config)
```

### 2ê°œ ê°œì… í¬ì¸íŠ¸

1. **Outline Intervention**
   - ëª©ì°¨ ìŠ¹ì¸/ìˆ˜ì • ê²°ì •
   - ìë™ ê²€í†  í›„ ì‚¬ìš©ì í™•ì¸

2. **Draft Intervention**
   - ì´ˆì•ˆ ê³„ì†/ì¤‘ë‹¨ ê²°ì •
   - ë§¤ ë°˜ë³µë§ˆë‹¤ ì‚¬ìš©ì í™•ì¸

---

## í…œí”Œë¦¿ ì‹œìŠ¤í…œ

### í…œí”Œë¦¿ êµ¬ì¡°

**íŒŒì¼**: `src/templates/outline_templates.py`

```python
TEMPLATE = {
    "name": str,
    "description": str,
    "sections": List[{
        "section_id": str,
        "title": str,
        "purpose": str,
        "key_points": List[str],
        "estimated_length": str,
        "research_needed": bool,
        "search_queries": List[str]  # {topic} í”Œë ˆì´ìŠ¤í™€ë” ì‚¬ìš©
    }]
}
```

### 3ê°€ì§€ í…œí”Œë¦¿

1. **Blog Post**: 5 ì„¹ì…˜
   - hook, context, main_content, practical, conclusion

2. **Technical Article**: 5 ì„¹ì…˜
   - abstract, introduction, technical_details, results, conclusion

3. **Marketing Copy**: 6 ì„¹ì…˜
   - headline, problem, solution, benefits, social_proof, cta

### ì»¤ìŠ¤í„°ë§ˆì´ì§•

```python
from src.templates import get_outline_template, customize_template

template = get_outline_template("blog_post")
customized = customize_template(template, topic="AI in healthcare")

# {topic} í”Œë ˆì´ìŠ¤í™€ë”ê°€ ì‹¤ì œ í† í”½ìœ¼ë¡œ ì¹˜í™˜ë¨
# "AI in healthcare current trends"
```

---

## ì„¤ì • ê´€ë¦¬

### Agent-Specific Temperatures

```python
# src/config/settings.py
business_analyst_temperature: float = 0.2    # ë¶„ì„ì 
content_strategist_temperature: float = 0.5  # ê· í˜•
outline_reviewer_temperature: float = 0.2    # ë¶„ì„ì 
writer_temperature: float = 0.8              # ì°½ì˜ì 
editor_temperature: float = 0.3              # ë¶„ì„ì 
```

### ì›Œí¬í”Œë¡œìš° ì„¤ì •

```python
max_iterations: int = 10              # ì´ˆì•ˆ ìµœëŒ€ ë°˜ë³µ
max_outline_revisions: int = 3        # ëª©ì°¨ ìµœëŒ€ ë°˜ë³µ
```

### ì›¹ ê²€ìƒ‰ ì„¤ì •

```python
search_provider: str = "duckduckgo"   # duckduckgo, tavily, serper
search_api_key: Optional[str] = None  # tavily, serperìš©
max_search_results_per_query: int = 5
enable_web_search: bool = True
```

---

## ì„¸ì…˜ ì˜ì†í™”

### SQLite Checkpointer

```python
from langgraph.checkpoint.sqlite import SqliteSaver

checkpointer = SqliteSaver.from_conn_string("data/checkpoints.sqlite")
app = workflow.compile(checkpointer=checkpointer)
```

### Thread IDë¡œ ì„¸ì…˜ ê´€ë¦¬

```python
config = {"configurable": {"thread_id": "unique-session-id"}}

# ìƒˆ ì„¸ì…˜
app.stream(initial_state, config)

# ì„¸ì…˜ ì¬ê°œ
app.stream(None, config)  # ì €ì¥ëœ ìƒíƒœì—ì„œ ì¬ê°œ
```

---

## ì„±ëŠ¥ ìµœì í™” ê³ ë ¤ì‚¬í•­

### 1. í† í° ì‚¬ìš©

- Business Analyst: JSON ì¶œë ¥ìœ¼ë¡œ ìµœì†Œí™”
- Content Strategist: í…œí”Œë¦¿ ì‚¬ìš©ìœ¼ë¡œ êµ¬ì¡°í™”
- Web Search: LLM ìš”ì•½ìœ¼ë¡œ ì••ì¶•
- Writer: ê°€ì¥ ë§ì€ í† í° ì‚¬ìš© (ì°½ì˜ì  ì‘ì„±)

### 2. ë³‘ë ¬ ì²˜ë¦¬ ê°€ëŠ¥ì„±

í˜„ì¬ëŠ” ìˆœì°¨ ì‹¤í–‰ì´ì§€ë§Œ, í–¥í›„ ê°œì„  ê°€ëŠ¥:
- ì—¬ëŸ¬ ì„¹ì…˜ ë™ì‹œ ë¦¬ì„œì¹˜
- ì—¬ëŸ¬ ë¦¬ë·°ì–´ì˜ ë³‘ë ¬ ê²€í† 

### 3. ìºì‹±

- ì›¹ ê²€ìƒ‰ ê²°ê³¼ ìºì‹±
- í…œí”Œë¦¿ ìºì‹±
- LLM ì‘ë‹µ ìºì‹± (ë™ì¼ í”„ë¡¬í”„íŠ¸)

---

## ì—ëŸ¬ ì²˜ë¦¬

### 1. LLM ì¶œë ¥ íŒŒì‹± ì‹¤íŒ¨

ëª¨ë“  ì—ì´ì „íŠ¸ì— í´ë°± ë©”ì»¤ë‹ˆì¦˜:
```python
try:
    result = json.loads(llm_response)
except json.JSONDecodeError:
    # ê¸°ë³¸ê°’ ë˜ëŠ” íœ´ë¦¬ìŠ¤í‹± ì‚¬ìš©
    result = create_fallback_result()
```

### 2. ì›¹ ê²€ìƒ‰ ì‹¤íŒ¨

```python
try:
    results = search_provider.search(query)
except Exception as e:
    print(f"Search failed: {e}")
    results = []  # ë¹ˆ ê²°ê³¼ë¡œ ê³„ì†
```

### 3. ë¬´í•œ ë£¨í”„ ë°©ì§€

- `max_outline_revisions`: 3íšŒ
- `max_iterations`: 10íšŒ
- ê°•ì œ ì¢…ë£Œ í›„ ì‚¬ìš©ì ê°œì…

---

## í™•ì¥ ê°€ëŠ¥ì„±

### ìƒˆ ì—ì´ì „íŠ¸ ì¶”ê°€

1. ì—ì´ì „íŠ¸ í´ë˜ìŠ¤ ìƒì„±
2. ë…¸ë“œ í•¨ìˆ˜ ì‘ì„±
3. WorkflowStateì— í•„ë“œ ì¶”ê°€ (í•„ìš”ì‹œ)
4. ì›Œí¬í”Œë¡œìš° ê·¸ë˜í”„ì— ë…¸ë“œ ì¶”ê°€
5. ë¼ìš°íŒ… í•¨ìˆ˜ ì—…ë°ì´íŠ¸

### ìƒˆ í…œí”Œë¦¿ ì¶”ê°€

```python
# src/templates/outline_templates.py
NEW_TEMPLATE = {
    "name": "new_template",
    "description": "ì„¤ëª…",
    "sections": [...]
}

TEMPLATE_REGISTRY["new_template"] = NEW_TEMPLATE
```

### ìƒˆ ê²€ìƒ‰ ì œê³µì ì¶”ê°€

```python
# src/tools/search_tools.py
def _search_new_provider(self, query: str, max_results: int):
    # êµ¬í˜„
    pass
```

---

## ëª¨ë²” ì‚¬ë¡€

### 1. ì—ì´ì „íŠ¸ ì„¤ê³„
- ë‹¨ì¼ ì±…ì„ ì›ì¹™
- ëª…í™•í•œ ì…ì¶œë ¥ ê³„ì•½
- êµ¬ì¡°í™”ëœ ì¶œë ¥ (JSON, TypedDict)

### 2. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
- ì—­í•  ëª…í™•íˆ ì •ì˜
- ì¶œë ¥ í˜•ì‹ ëª…ì‹œ
- ì˜ˆì‹œ ì œê³µ (Few-shot)

### 3. ìƒíƒœ ê´€ë¦¬
- Reducer íŒ¨í„´ í™œìš©
- ë¶€ë¶„ ì—…ë°ì´íŠ¸ë§Œ ë°˜í™˜
- ë¶ˆë³€ì„± ìœ ì§€

### 4. ì—ëŸ¬ ì²˜ë¦¬
- ëª¨ë“  ì™¸ë¶€ í˜¸ì¶œì— try-except
- ì˜ë¯¸ìˆëŠ” ì—ëŸ¬ ë©”ì‹œì§€
- í´ë°± ë©”ì»¤ë‹ˆì¦˜

---

## ë””ë²„ê¹… íŒ

### 1. ëŒ€í™” ì´ë ¥ í™•ì¸

```python
for msg in state["conversation_history"]:
    print(f"[{msg['role']}]: {msg['content'][:100]}...")
```

### 2. ìƒíƒœ ìŠ¤ëƒ…ìƒ·

```python
import json
print(json.dumps(state, indent=2, default=str))
```

### 3. ì²´í¬í¬ì¸íŠ¸ ì¡°íšŒ

```python
# SQLite ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ ì¡°íšŒ
import sqlite3
conn = sqlite3.connect("data/checkpoints.sqlite")
cursor = conn.cursor()
cursor.execute("SELECT * FROM checkpoints")
```

---

## ê²°ë¡ 

ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì€:
- âœ… 6ê°œ ì „ë¬¸ ì—ì´ì „íŠ¸ë¡œ ì—­í•  ë¶„ë‹´
- âœ… 2ê°œ Human-in-the-Loop ê°œì… í¬ì¸íŠ¸
- âœ… í…œí”Œë¦¿ ê¸°ë°˜ êµ¬ì¡°í™”ëœ ì¶œë ¥
- âœ… ì›¹ ê²€ìƒ‰ í†µí•©ìœ¼ë¡œ ì‚¬ì‹¤ ê¸°ë°˜ ì‘ì„±
- âœ… Self-Review íŒ¨í„´ìœ¼ë¡œ í’ˆì§ˆ ë³´ì¥
- âœ… ì™„ì „í•œ ì„¸ì…˜ ì˜ì†í™”

ì´ ì•„í‚¤í…ì²˜ëŠ” í™•ì¥ ê°€ëŠ¥í•˜ë©°, ìƒˆë¡œìš´ ì—ì´ì „íŠ¸ì™€ ê¸°ëŠ¥ì„ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
